(this["webpackJsonpattract-filter"]=this["webpackJsonpattract-filter"]||[]).push([[0],{131:function(e,t,c){"use strict";c.r(t);var a=c(3),i=c(0),n=c.n(i),r=c(21),s=c.n(r),l=(c(96),c(97),c(4)),o=c(22),j=(c(98),c(26)),d=c.n(j);function g(e){var t=Object(l.a)({},e),c=t.id,n=t.city,r=t.cityId,s=t.name,j=t.pic,g=t.category,O=t.categoryId,b=t.price,u=Object(i.useState)({id:null,city:"",cityId:null,name:"",pic:"",category:"",categoryId:null,price:null}),p=Object(o.a)(u,2),m=p[0],f=p[1];return Object(i.useEffect)((function(){m.id||f(Object(l.a)(Object(l.a)({},m),{},{id:c,city:n,cityId:r,name:s,pic:j,category:g,categoryId:O,price:b}))}),[]),Object(a.jsxs)("div",{className:d.a.card,children:[Object(a.jsx)("div",{className:d.a.back,style:{height:180,backgroundImage:"url(".concat(m.pic,")")},children:Object(a.jsx)("div",{className:d.a.inner,children:Object(a.jsx)("span",{className:d.a.location,children:m.city})})}),Object(a.jsxs)("div",{className:d.a.content,children:[Object(a.jsx)("h4",{className:d.a.title,children:m.name}),Object(a.jsxs)("div",{className:d.a.priceArea,children:[Object(a.jsx)("span",{className:d.a.category,children:m.category}),Object(a.jsxs)("span",{className:d.a.price,children:["$",m.price]})]})]})]})}g.defultProps={id:Date.now(),city:"",pic:"/static/media/pic_1.png",title:"Affiliate Marketing - A Beginner's Guide to Earning Online",category:"Architecture",price:115};var O=g,b=function(e,t){var c=t.filter((function(t){return t.id===e})),a=c.length>0?c[0]:{};return a.hasOwnProperty("name")?a.name:""},u=[{id:1,name:"London"},{id:2,name:"Odessa"},{id:3,name:"Canada"},{id:4,name:"Miami"},{id:5,name:"Shanghai"}],p=[{id:1,name:"Architecture"},{id:2,name:"Business"},{id:3,name:"Design"},{id:4,name:"Development"},{id:5,name:"Marketing"},{id:6,name:"Photography"}],m=[{id:1,name:"Affiliate Marketing - A Be ginner's Guide to Earning Online",city:1,pic:"./img/pic_1.png",category:2,price:50},{id:2,name:"Name 2",city:4,pic:"./img/pic_2.png",category:1,price:100},{id:3,name:"Name 3",city:5,pic:"./img/pic_3.png",category:1,price:1},{id:4,name:"Name 4",city:2,pic:"./img/pic_2.png",category:4,price:150},{id:5,name:"Name 5",city:3,pic:"./img/pic_1.png",category:5,price:200}],f=n.a.createContext(),y=c(75),h=c.n(y);var _=function(e){var t=Object(i.useContext)(f),c=t.filter,n=t.setFilter,r=Object(i.useState)({cities:[],categories:[],items:[],loading:!1}),s=Object(o.a)(r,2),j=s[0],d=s[1],g=function(t){var c={};return c.id=t.hasOwnProperty("id")?t.id:e.id,c.cityId=t.hasOwnProperty("city")?t.city:null,c.name=t.hasOwnProperty("name")?t.name:"",c.categoryId=t.hasOwnProperty("category")?t.category:null,c.city=c.cityId?b(c.cityId,j.cities):"",c.category=c.categoryId?b(c.categoryId,j.categories):"",c.pic=t.hasOwnProperty("pic")?t.pic:"",c.price=t.hasOwnProperty("price")?t.price:null,c},y=function(e,t){var c=Object(o.a)(t,2),a=c[0],i=c[1];return e>=a&&e<=i};return Object(i.useEffect)((function(){var e=c.category,t=c.city,a=c.price;if(0===j.cities.length&&d(Object(l.a)(Object(l.a)({},j),{},{cities:u,loading:!0})),0===j.categories.length&&d(Object(l.a)(Object(l.a)({},j),{},{categories:p,loading:!0})),j.cities.length>0&&j.categories.length>0)if(0===j.items.length){var i=m.map((function(e){return g(e)}));d(Object(l.a)(Object(l.a)({},j),{},{items:i,loading:!1}))}else if(c.filtering){var r=m.filter((function(c){return e.length>0&&e.includes(c.category)?(y(c.price,a)||c.city,c):c.city===t&&y(c.price,a)?c:null===t&&0===e.length?(y(c.price,a),c):void 0})).map((function(e){return g(e)}));d(Object(l.a)(Object(l.a)({},j),{},{items:r,loading:!1}))}!1===j.loading&&n(Object(l.a)(Object(l.a)({},c),{},{filtering:!1}))}),[j.cities,j.categories,j.loading,c.filtering]),Object(a.jsx)("div",{className:h.a.content,children:j.loading?Object(a.jsx)("h2",{children:"Loading...."}):j.items.length>0&&j.items.map((function(e){return Object(a.jsx)(O,Object(l.a)({},e),e.id)}))})},x=c(134),v=c(65),N=c.n(v),C=x.a.Option,I=localStorage;function k(e){var t=JSON.parse(I.getItem("filter")),c=Object(i.useContext)(f),n=c.filter,r=Object(i.useState)({name:"",id:null,cities:[]}),s=Object(o.a)(r,2),j=s[0],d=s[1];Object(i.useEffect)((function(){if(0===j.cities.length&&d(Object(l.a)(Object(l.a)({},j),{},{cities:u})),j.cities.length>0&&""===j.name){var e=j.cities[0],a=Object(l.a)({},e),i=(a.name,a.id),r=null===t.city?i:t.city,s=b(r,j.cities);c.setFilter(Object(l.a)(Object(l.a)({},n),{},{city:r})),d(Object(l.a)(Object(l.a)({},j),{},{name:s,id:r}))}}),[j.cities,j.name]);return Object(a.jsxs)("div",{className:N.a.city,children:[Object(a.jsx)("h3",{children:"City"}),j.id&&Object(a.jsx)(x.a,{defaultValue:j.name,className:N.a.select,onChange:function(e,t){c.setFilter(Object(l.a)(Object(l.a)({},n),{},{city:t.id})),d(Object(l.a)(Object(l.a)({},j),{},{name:e,id:t.id}))},children:j.cities.map((function(e){return Object(a.jsx)(C,{value:e.name,id:e.id,children:Object(a.jsx)("p",{children:e.name})},e.id)}))})]})}var P=c(35),A=c(135),S=c(61),w=c.n(S),E=localStorage;function F(e){var t=JSON.parse(E.getItem("filter")),c=Object(i.useContext)(f),n=c.filter,r=c.setFilter,s=Object(i.useState)({categories:[],selected:[]}),j=Object(o.a)(s,2),d=j[0],g=j[1];Object(i.useEffect)((function(){if(0===d.categories.length){var e=p.map((function(e,t,c){var a=function(e,t){return t.filter((function(t){return t.category===e})).length}(e.id,m);return e.amount=a,e}));g(Object(l.a)(Object(l.a)({},d),{},{categories:e}))}t&&t.category.length>0&&0===d.selected.length&&g(Object(l.a)(Object(l.a)({},d),{},{selected:t.category}))}),[d.categories,d.selected]);var O=function(e){var t=Object(P.a)(d.selected),c=Object(l.a)({},e.target),a=c.checked,i=c.id;if(a)t.includes(i)||(t.push(i),r(Object(l.a)(Object(l.a)({},n),{},{category:t})),g(Object(l.a)(Object(l.a)({},d),{},{selected:t})));else if(d.selected.length>0){var s=t.filter((function(e){return e!==i}));r(Object(l.a)(Object(l.a)({},n),{},{category:s})),g(Object(l.a)(Object(l.a)({},d),{},{selected:s}))}};return Object(a.jsxs)("div",{className:w.a.category,children:[Object(a.jsx)("h3",{children:"Categories "}),Object(a.jsx)("ul",{children:d.categories.length>0&&d.categories.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsxs)(A.a,{id:e.id,name:e.name,className:w.a.checkItem,onChange:O,checked:!!d.selected.includes(e.id),children:[e.name,Object(a.jsx)("span",{className:w.a.amount,children:e.amount})]})},e.id)}))})]})}var J=c(132),M=c(41),V=c.n(M);function q(e){var t=Object(i.useContext)(f),c=t.filter,n=t.setFilter,r=Object(i.useState)({min:null,max:null,range:[]}),s=Object(o.a)(r,2),j=s[0],d=s[1],g=function(e,t,c){var a=Object(P.a)(c),i=(a[0],a[1]/100);return[e*i,t*i]};Object(i.useEffect)((function(){if(null===j.min&&null===j.max){var e=Object(P.a)(m),t=Object(P.a)(function(e){var t=e.sort((function(e,t){return e.price-t.price})),c=t[0],a=t[t.length-1];return[c.price,a.price]}(e)),a=t[0],i=t[1];n(Object(l.a)(Object(l.a)({},c),{},{price:[a,i]})),d(Object(l.a)(Object(l.a)({},j),{},{min:a,max:i,range:[a,i]}))}}),[j.range]);return Object(a.jsxs)("div",{className:V.a.price,children:[Object(a.jsx)("h3",{children:"Price"}),Object(a.jsx)(J.a,{className:V.a.slider,range:!0,tooltipVisible:!1,defaultValue:[1,100],onChange:function(e){var t=Object(P.a)(e),a=t[0],i=t[1],r=g(a,i,[j.min,j.max]);n(Object(l.a)(Object(l.a)({},c),{},{price:r})),d(Object(l.a)(Object(l.a)({},j),{},{range:r}))}}),Object(a.jsxs)("div",{className:V.a.btnArea,children:[Object(a.jsx)("p",{children:Object(a.jsxs)("span",{className:V.a.amount,children:["$",j.range[0]," - $",j.range[1]]})}),Object(a.jsx)("button",{className:V.a.btn,onClick:function(){n(Object(l.a)(Object(l.a)({},c),{},{filtering:!0}))},children:"Filter"})]})]})}function B(e){return Object(a.jsxs)("div",{className:"filter",children:[Object(a.jsx)(k,{}),Object(a.jsx)(F,{}),Object(a.jsx)(q,{})]})}var D=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(B,{})})},L=c(45),H=c.n(L),Y=localStorage;var $=function(){var e=Object(i.useState)({city:null,category:[],price:[],filtering:!1}),t=Object(o.a)(e,2),c=t[0],n=t[1];return Object(i.useEffect)((function(){if(Y.getItem("filter")){var e=JSON.parse(Y.getItem("filter"));null!==c.city&&(e.city=c.city),c.category.length>0&&(e.category=c.category),0===c.category.length&&e.category.length>0&&(e.category=e.category),c.price.length>0&&(e.price=c.price),Y.setItem("filter",JSON.stringify(Object(l.a)({},e))),e.category.length>0&&n(Object(l.a)(Object(l.a)({},c),{},{category:e.category}))}else Y.setItem("filter",JSON.stringify(c))}),[c.city,c.category,c.price]),Object(a.jsx)(f.Provider,{value:{filter:c,setFilter:n},children:Object(a.jsx)("div",{className:"App",children:Object(a.jsx)("div",{className:H.a.container,children:Object(a.jsxs)("div",{className:H.a.wrapper,children:[Object(a.jsx)(D,{className:H.a.filter}),Object(a.jsx)(_,{className:H.a.content})]})})})})};s.a.render(Object(a.jsx)($,{}),document.getElementById("root"))},26:function(e,t,c){e.exports={card:"Card_card__1eE8R",back:"Card_back__22bjH",inner:"Card_inner__1VluS",priceArea:"Card_priceArea__2Yawc",title:"Card_title__2pVhP",location:"Card_location__rchOO",content:"Card_content__3Ie1M",category:"Card_category__1ckOY",price:"Card_price__qstF6"}},41:function(e,t,c){e.exports={price:"Price_price__XwkTM",slider:"Price_slider__1KqxI",amount:"Price_amount__1IqrA",btnArea:"Price_btnArea__2bpko",btn:"Price_btn__3sVP9"}},45:function(e,t,c){e.exports={container:"App_container__1MQN3",wrapper:"App_wrapper__2Rh_f",filter:"App_filter__2vLqq"}},61:function(e,t,c){e.exports={category:"Category_category__yLBx6",checkItem:"Category_checkItem__34HMx",amount:"Category_amount__2hzX3"}},65:function(e,t,c){e.exports={select:"City_select__aaDOW",city:"City_city__2uOJp"}},75:function(e,t,c){e.exports={content:"Content_content__3jYHC"}},97:function(e,t,c){},98:function(e,t,c){}},[[131,1,2]]]);
//# sourceMappingURL=main.a4e84426.chunk.js.map